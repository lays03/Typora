# Mobility-prediction and energy optimization for multi-channel multi-interface ad hoc networks in the presence of location errors

存在位置误差的多通道多接口自组织网络移动预测与能量优化

## 0. Abstract

问题场景：针对存在位置误差的多通道多接口自组织网络，提出了一种移动预测和能量优化的解决方案

方案：可以适应动态信道、流量条件、干扰和节点移动性的MCMI通信链路路由

为了在网络层和MAC层之间共享信息，我们首先实现了一种新的跨层路由解决方案，这种技术的好处是**收集有关节点的信道质量和剩余能量的信息，并将它们直接发送到网络层**。接下来，我们提出了一个**使用卡尔曼滤波的移动预测模型，通过估计链路持续时间和选择可靠的路由来预测准确的位置并提高路由性能**。

使用NS2.35模拟不同场景和网络中变化的负载来测量所提出的机制的性能。仿真结果对比分析表明，该协议(ME-MCMI AODV)在降低端到端时延、减少丢包总数、提高网络寿命和数据包传递比(PDR)等方面具有较好的性能。



## 1. Introduction

移动自组织网络 (MANET) 的主要目标是扩展移动性概念以实现对信息的访问以及使用路由协议来随时随地的通信来传输数据。因此**通过最小化控制数据包来延长网络寿命很重要**，因为**移动节点由独立电源（例如电池或其他消耗品）供电**。此外，**由于节点电池电量有限，在网络中移动频繁，它们之间的链路经常断开，导致数据包丢失**。因此，节点应仅发送必要的数据包，并根据相邻节点的定位选择链路故障率较低的路径，以节省能源资源。然而，<font color=red>**MANET 的动态拓扑使得实时确定节点位置变得更加困难。因此，我们提出的方法使用移动性预测来测量链路持续时间，这可以减少开销消息并提高路由性能**</font>

大多数现有研究主要集中在节点移动性对链路可靠性的影响，他们在他们的方法中忽略了节点的剩余能量，而不是在多通道多接口上工作，他们将他们的机制调整为使用单接口单通道（SISC） ） 环境。在本文中，**能量和移动性被引入作为一种新的路由度量，以在多通道多接口自组织网络中根据可靠性选择链路**。首先，我们方法中的节点使用移动性来预测链路持续时间。然后，它将这个持续时间与剩余能量结合起来，找到一条寿命长的稳定路线。最后，它在通道和接口之间搜索一个好的映射，将数据发送到目的节点。

## 2. Related work

在文献中，已经进行了大量研究来提高移动 Ad hoc 网络的性能。这些研究试图找到满足特定约束条件的路线。一些使用概率方法来限制路由数据包的数量，而另一些则使用队列长度、带宽、移动性、能量和跳数来分隔源和目的地。很少有研究人员在他们的模型中考虑了位置误差

## 3. PROPOSED APPROACH AND FUNCTIONAL DETAILS

在本节中，我们提出了我们的模型，通过使用**链路持续时间和剩余能量**作为移动 Ad Hoc 网络中多通道多接口通信中的路由度量来改进 AODV 协议

### 3.1 Cross-layer

为了利用有关节点的信道质量和剩余能量的信息，我们开发了一个跨层以在网络、MAC 和物理层之间共享此信息。尽管使用单通道单接口方案的几种方法试图实现高质量的服务方案，但由于流内干扰和流间干扰，即使不是全部，它们中的大多数也不成功。因此，在我们的工作中，我们使用多通道环境来解决这些问题，并为用户提供更可靠的 MAC 协议。

在 MANET 中，**信道在频率上是分开的**，因此要使用 ad hoc 网络提供的不同信道，我们需要开发一种**允许节点之间协调的信道分配方法** [27]。这些方法分为三类：静态、动态和混合信道分配。在这项工作中，我们专注于**混合信道策略**，以受益于静态和动态分配的优势。在这个策略中，<font color=red>**每个节点都有多个接口，只有一个接口是固定的，其他的接口是可切换的。当源节点需要与目的节点通信时，它会将自己的可切换接口切换到目标节点固定接口所指向的同一通道。**</font>

图 1 说明了使用“固定”和“可切换接口”时节点之间的通信示例。假设节点X有数据要发送给节点Y，节点X和Y的固定接口分别分配给通道3和1。为了确保这种通信，在发送数据包之前，节点 X 的可切换接口分配给通道 1，因为通道 1 是节点 Y 的固定通道。

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310092403249.png" alt="image-20230310092403249" style="zoom:50%;" />

### 3.2 Residual energy

修改了路由发现过程以**选择由具有较高剩余能量的节点组成的路径**。在这种方法中，当一个 RREQ 消息在网络中传输时，并不是每个接收到该消息的节点都会扩散它。如果中间节点的剩余能量低于预定义的阈值，则丢弃 RREQ，否则，转发消息图 2

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310093250980.png" alt="image-20230310093250980" style="zoom:50%;" />

### 3.3 Location correction

实际上，位置测量工具并不能给出节点的准确位置。因此，为了使我们的方法可信，我们引入了一个模型，该模型考虑了位置错误的存在。**测量误差（也称为观测误差）是测量值与其真实值之间的差异**

Kalman filter（卡尔曼滤波器）

在我们的模型中，我们**使用卡尔曼滤波器来估计网络中节点的内部状态位置**。每个节点都运行一个卡尔曼滤波器预测器，**用于预测节点自身的位置 (x, y) 和速度 (vx, vy)**。时刻 t 的位置向量通过以下方式测量：

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310094404834.png" alt="image-20230310094404834" style="zoom:50%;" />

为了定期找到当前状态的最佳估计，我们应用卡尔曼滤波器的时间和测量更新机制，如（2）和（7）所示。我们系统的状态估计所涉及的步骤描述如下：

<font color=red>**− Time update (Prediction)：**</font>

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310094916482.png" alt="image-20230310094916482" style="zoom:50%;" />位置预测

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310094931619.png" alt="image-20230310094931619" style="zoom:50%;" />误差协方差

<font color=red>**− Measurement update (Correct)：**</font>

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310095014734.png" alt="image-20230310095014734" style="zoom:50%;" />状态测量

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310095042342.png" alt="image-20230310095042342" style="zoom:50%;" />卡尔曼增益

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310095407513.png" alt="image-20230310095407513" style="zoom:50%;" />更新预测测量

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310095340527.png" alt="image-20230310095340527" style="zoom:50%;" />更新误差协方差

上述等式中： 

A ：状态转移矩阵；

 Q：噪声协方差矩阵；

 H：观测矩阵；

 R：观察的噪声协方差矩阵。

 Yt：从当前节点得到的观测向量，即节点的当前位置。

![image-20230310100232062](C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310100232062.png)

### 3.4 Predicting link expiration time

我们将**通过计算其链路过期时间来确保选择的路由是稳定的**。**只有当这个时间大于预定义的阈值时，该节点才会参与路由发现**。链路到期时间是在路由的每一跳处计算的，并考虑了网络中涉及的节点的移动性。因此，**节点在接收到 RREQ 后计算其自身与发送方之间的链路持续时间，这意味着使用上一节中计算的真实位置（如（6））而不是测量的位置信息来预测链路的生命周期**。让我们假设两个节点 i 和 j 在彼此的**传输范围 r** 内。

− (xi, yi)：节点i的坐标。

 − (xj, yj)：节点j的坐标。 

− Vi 和 Vj 分别是节点 i 和 j 的速度。 

− θi 和 θj (0 <= θi, θj < 2π) 分别是节点 i 和 j 的移动方向。

因此，如[28]中所定义，**两个节点之间链路的链路到期时间（两个节点在彼此传输范围内的最长时间间隔的长度）**Dt 如下所示：

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310102428626.png" alt="image-20230310102428626" style="zoom:50%;" />

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310102440821.png" alt="image-20230310102440821" style="zoom:50%;" />

在修改后的RREQ中，如果计算出来的链路到期时间小于链路到期时间的阈值，则接收节点将Link Duration Time值替换为新值。如果接收者不是 RREQ 的目的地，则该节点将其广播到其他节点。

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230310111148139.png" alt="image-20230310111148139" style="zoom:50%;" />



能量有一个阈值，链路生存时间也有一个阈值





## 4. EXPERIMENTAL MODELING, ANALYSIS AND RESULTS

### 4.1 Experimental modeling

#### 4.1.1 Simulation model

在本文中，由于其可用性，我们使用网络模拟器 (NS-2) 软件对我们提出的协议 (ME-MCMI AODV)、AODV 和 AODV [8] 进行了模拟。 NS-2 是用 C++ 和 OTCL 编写的离散事件模拟器，C++ 用于每个事件数据包的数据，OTCL 用于周期性和触发事件。 NS-2 包括一个名为 Nam Animator 的网络动画器，它提供了模拟的可视化视图。 AWK 脚本用于分析 TCL 的输出并获得网络性能。



#### 4.1.2. Model parameters

<img src="C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230311124417246.png" alt="image-20230311124417246" style="zoom:50%;" />

数据包大小和仿真时间为 600 秒。随机路点移动 (RWP) [29] 模型用作移动模型，**随机选择速度在 1 m/s 和 20 m/s 之间**。通过改变网络大小（节点数）和暂停时间来评估协议的性能。我们考虑 10 次随机模拟运行，所考虑因素的性能是这些输出的平均值。

### 4.2. Results and discussion 

### 4.3. Choosing the number of interfaces

在我们的模型中，设备可以通过多个接口进行通信。因此，我们必须选择在物理层中实现的最佳接口数量。表 2 显示了我们在多通道多接口环境中的仿真研究结果。**从表中我们可以注意到，超过两个接口，我们协议的性能会下降。这是由于多种因素造成的，例如 RF 干扰、天线相关性。此外，MIMO 系统中的每个天线都需要一个射频 (RF) 单元，因此由于处理复杂且计算量大的信号处理算法，电池会更快耗尽。**这就是为什么我们选择每个节点仅使用两个接口我们的其余贡献

![image-20230311124553394](C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230311124553394.png)



#### 4.3.1. Packet delivery ratio

**数据包传送率 (PDR) 的计算方法是将 CBR 接收器在最终目的地接收到的数据包数量除以“应用层”CBR 源发出的数据包数量。** **PDR 需要很高才能实现有效的路由性能。**图 4 显示了 ME-MCMI AODV、AODV 和 AODV [3] 的数据包在节点数量、暂停时间和数据包大小的变化方面的传递率。我们观察到，**当节点以低速移动时，协议具有更高的 PDR。当速度增加时，路由协议的 PDR 会下降。**这是正常的，因为更高的节点速度会使路由不稳定，从而导致丢失数据增加。我们还注意到，与 AODV 和 AODV [8] 相比，无论参数（节点密度、暂停时间和数据包大小）的变化如何，我们提出的协议都显示出更高的值，<font color=red>**因为提出的协议选择具有足够能量和高链路持续时间的节点**。**这种机制减少了路由失败的机会，特别是在高移动性（低暂停时间）的情况下，从而提高了数据包传递效率。**</font>

![image-20230311124743549](C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230311124743549.png)

#### 4.3.2. Total dropped packets

**Total Dropped Packets 是目的地未接收到的数据包数。**由于传输错误和拥塞等多种因素，数据包可能会丢失。这种丢失可能发生在网络层和 MAC 层。这些因素的结果与主机移动性、连接数、流量负载和数据包大小有关。从图 5 中，**移动节点数量、暂停时间和数据包大小的变化表明 AODV 和 AODV [8] 比 ME-MCMI AODV 有更多的丢包。**网络中节点的数量、暂停时间和数据包大小将影响网络中不同线对之间路由发现的要求。所以，从这个图中可以看出，**当暂停时间减少和数据包大小增加时，丢弃的数据包数量增加，因为更高的移动性导致更多断开的链接，更大的数据包大小使得由于冲突和接口而丢失的机会非常大溢出。**在我们的方法中，<font color=red>**选择了高剩余能量和链路持续时间的路径，因此路由不会很快中断，从而减少了丢包的数量。**</font>

![image-20230311124832937](C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230311124832937.png)

#### 4.3.3. End to end delay

**端到端延迟是发送和接收的数据包数量之间的时间差与到达目的地所需的总时间之比。**它是评估协议的重要参数，延迟减少的越多，网络的性能输出就越好。**图 6 显示了节点数量从 10 到 150、暂停时间从 10 秒到 150 秒以及数据包大小从 700 到 1200 字节的端到端延迟。从这个图中，我们注意到这个参数随着数据包大小、网络密度和节点移动性的增加而减小。**首先是因为在稳定的网络中，当更多的节点竞争访问信道时，成功访问介质的概率会降低，而且由于更多的数据包丢失和数据包重传，较大的数据包需要更多的时间才能到达目的地是需要的。我们还观察到，**在所有模拟场景（节点数、暂停时间和数据包大小）中，ME-MCMI AODV 的平均端到端延迟小于 AODV 和 AODV [8]。原因是我们的协议通过选择稳定的路径来减少流量负载，从而减少排队和传播延迟。**

![image-20230311125008088](C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230311125008088.png)

#### 4.3.4. Lifetime

从图 7 中，结果表明**网络寿命随着节点密度或暂停时间的增加而增加。因为如果网络中的节点数量太少，则该网络中可能不存在源和目的地之间的可行路由，因此需要较大开销的消息来保持和发现路由，从而导致高能量消耗。**对于第三个参数，**我们观察到随着数据包大小的增加，将数据包从一端传输到另一端需要更多的能量，从而缩短网络节点的寿命和网络的整体寿命。**结果表明，**我们的改进算法通过实现第一个节点耗尽其在网络上的能量的长时间持续时间，优于 AODV 和 AODV [8]。网络寿命的改善是由于 ME-MCMI AODV 防止小的剩余能量节点成为中继节点或选择持续时间长的路径而不是源和目的地之间的较短路径。**

![image-20230311125118700](C:\Users\27252\AppData\Roaming\Typora\typora-user-images\image-20230311125118700.png)

#### 4.3.5. Reason behind the result

如前所述，结果表明，与基本 AODV 和 AODV [8] 相比，ME-MCMI AODV 产生了更好的性能结果。与其他两个协议相比，ME-MCMI AODV 的改进性能可归因于几个设计因素。主要因素之一是**结合了增强的 RREQ 机制，这降低了我们方法中的问题发生率**。在 ME-MCMI AODV 中，**在任何一对节点之间创建的路由仅由能量水平高于阈值的节点组成，因此我们的协议确保了更稳定的链路，没有不必要的链路中断，从而更成功地将数据包传递到目的地节点。**因此，ME-MCMI AODV 发送的控制数据包数量较少，可以减少开销并延长网络的使用寿命。



## 5. Conclusion

**路由的稳定性和网络的生命周期被认为是 MANET 中具有挑战性的任务。**本文提出了一种多通道多接口按需路由算法（ME-MCMI AODV），**其移动性预测考虑了节点的位置误差和剩余能量**。通过仿真，与该领域的其他协议相比，我们提出的算法在**数据包传递率**、总丢弃数据包、**端到端延迟**和网络寿命方面表现出显着的性能改进，特别是在连接更多、节点移动性高的网络中和大数据包大小。由于ME-MCMI AODV协议选择能量充足和链路持续时间长的节点，因此路由不会很快中断。

考虑到本文提出的解决方案的好处，在未来的工作中，我们将尝试通过提出一个模型来扩展该解决方案，该模型将考虑在源节点和目标节点之间建立路由的过程中的其他参数，例如通道队列长度、信噪比和不同的模拟参数（添加一些结果与移动模型中的最大速度、生成和速率。





